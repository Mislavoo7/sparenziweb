<% res = @page %>
<%= form_for [:admin, res, @section], :html => { class: 'form' } do |f| %>

  <div class="form-body">

    <div class="form-field__row">
      <div class="form-field">
        <%= f.label :section_type, class: 'label' %>
        <%= f.select :section_type, options_for_select(Section.allowed_types, @section.section_type), {prompt: false}, {class: "input"} %>
      </div>
    </div>

    <fieldset>
      <div data-controller="tabs" data-tabs-tab-active="active text-primary-600 border-primary-600" data-tabs-tab-inactive="hover:text-gray-600 hover:border-gray-200 border-transparent">
        <%= select_tag :tabs_select,
          options_for_select([["Croatian", 0], ["English", 1], ["German", 2]]),
          include_blank: false,
          class: 'sm:hidden page-navigation-tabs',
          data: { tabs_target: 'select' }
        %>

      <div class="hidden sm:block text-sm font-medium text-center text-gray-500 mb-4">
        <ul class="flex flex-wrap gap-4 border-b border-gray-200 -mb-px">
          <% index = 0 %>
          <%= f.fields_for :section_translations do |ff| %>
            <li data-tabs-target="trigger" data-index="<%= index %>" class="select-none inline-block p-4 border-b-2 cursor-pointer">
              <%= language_title(ff) %>
              <% index += 1 %>
            </li>
          <% end %>
        </ul>
      </div>

      <% index = 0 %>
      <%= f.fields_for :section_translations do |ff| %>
        <div data-tabs-target="content" data-index="<%= index %>" class="hidden sm:p-4">
          <div data-locale="<%= ff.object.locale %>">
            <%= ff.hidden_field :locale %>
            <div class="">
              <%= ff.label :title, class: 'label' %>
              <div class="mt-4">
                <%= ff.text_field :title, class: "input js_seo_source_title_#{language_value(ff)}" %>
              </div>
            </div>

            <div class="mt-4">
              <%= ff.label :content, class: 'label' %>
              <div class="mt-2 w-full">
                <%= ff.rich_textarea :content, class: "js_seo_source_description_#{language_value(ff)} js_seo_source_keywords_#{language_value(ff)}" %>
              </div>
            </div>
          </div>

          <% index += 1 %>
        </div>
      <% end %>

      </div>
    </fieldset>
  </div>

  <div class="flex pt-6">
    <%= link_to t('cancel'), @return_url, class: 'button is-white' %>
    <%= f.submit t("save"), data: { disable_with: t('please_wait') }, class: "button is-primary" %>
  </div>
<% end %>
