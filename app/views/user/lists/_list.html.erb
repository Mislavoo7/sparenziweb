<li data-lists-id="<%= dom_id(list) %>" data-sortable-id="<%= list.id %>" class="w-full mb-6 bg-white rounded-xl shadow-xl border border-gray-100 hover:shadow-2xl transition-all duration-300 sm:hover:-translate-y-1"> 
  <div class="p-4 sm:px-6 lg:px-8 sm:pb-8">
    <!-- Enhanced Header Section -->
    <div class="pb-4 border-b border-gray-100">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
        <div class="flex-1">
          <div class="flex items-center gap-3 mb-2">
            <div class="w-3 h-3 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full"></div>
            <h1 class="text-lg sm:text-xl font-bold text-gray-900 tracking-tight"> <%= list.shop_name %> - <span id="js-list-total-price-<%= list.id %>"> <%= list.total_price_humanized %> </span> </h1>
          </div>
          <p class="text-xs sm:text-sm text-gray-600 font-medium bg-gray-50 inline-block px-3 py-1 rounded-full"> 
            <%= tf("list.shop_name") %> <%= list.taken_at.strftime("%d.%m.%Y.") %>
          </p>
        </div>
        <div class="flex gap-2 items-center justify-end sm:justify-start">
          <button class="enhanced-action-btn bg-gray-100 hover:bg-gray-200" data-sortable-handle data-tooltip="<%= t('tooltips.sort') %>">
            <%= phosphor_icon 'arrows-out-cardinal', class: 'w-4 h-4' %>
          </button>
          <%= render "user/lists/visible_bttn", list: list %>
          <%= link_to edit_user_list_path(list), class: "enhanced-action-btn bg-blue-100 hover:bg-blue-200 text-blue-700", data: {tooltip: t('tooltips.edit')} do %>
            <%= phosphor_icon 'pencil-simple', options: { class: 'w-4 h-4' } %>
          <% end %>
          <%= link_to user_list_path(list), class: "enhanced-action-btn bg-red-100 hover:bg-red-200 text-red-700", method: :delete, data: {tooltip: t('tooltips.destroy'), confirm: t('are_you_sure') }, remote: true do %>
            <%= phosphor_icon 'trash-simple', options: { class: 'w-4 h-4' } %>
          <% end %>
        </div>
      </div>
    </div>

    <!-- Mobile Card View (visible on mobile) -->
    <div class="mt-4 sm:hidden space-y-3" data-controller="sort-with-update" data-sortable-update-path="<%= sort_user_list_products_path(list) %>" id="list-body-mobile-<%= list.id %>">
      <% list.products.all_visible.each do |product| %>
        <div class="mobile-product-card bg-gray-50 rounded-lg p-4 border border-gray-200" data-products-id="<%= dom_id(product) %>" data-sortable-id="<%= product.id %>">
          <div class="flex justify-between items-start mb-3">
            <div class="flex items-center gap-2">
              <div class="w-2 h-2 bg-blue-400 rounded-full"></div>
              <span class="text-sm font-semibold text-gray-900"><%= product.app_id %></span>
            </div>
            <div class="text-lg font-bold text-green-600 bg-green-100 px-3 py-1 rounded-full">
              <%= product.price_humanized %>
            </div>
          </div>
          
          <h3 class="text-base font-medium text-gray-900 mb-2"><%= product.product_name %></h3>
          
          <div class="flex justify-between items-center">
            <span class="text-sm text-gray-600 bg-gray-200 px-2 py-1 rounded-full">
              <%= product.company %>
            </span>
            <div class="flex gap-2">
              <button class="mobile-action-btn bg-gray-200 hover:bg-gray-300" data-sortable-handle data-tooltip="<%= t('tooltips.sort') %>">
                <%= phosphor_icon 'arrows-out-cardinal', class: 'w-4 h-4' %>
              </button>
              <%= link_to edit_user_list_product_path(list, product), remote: true, class: "mobile-action-btn bg-blue-200 hover:bg-blue-300 text-blue-700", data: {tooltip: t('tooltips.edit')} do %>
                <%= phosphor_icon 'pencil-simple', options: { class: 'w-4 h-4' } %>
              <% end %>
              <%= link_to user_list_product_path(list, product), remote: true, class: "mobile-action-btn bg-red-200 hover:bg-red-300 text-red-700", method: :delete, data: {tooltip: t('tooltips.destroy'), confirm: t('are_you_sure') }, remote: true do %>
                <%= phosphor_icon 'trash-simple', options: { class: 'w-4 h-4' } %>
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
      
      <div class="mobile-add-product bg-blue-50 border-2 border-dashed border-blue-200 rounded-lg p-4 text-center hover:bg-blue-100 transition-colors">
        <%= render "user/products/new_bttn", list: list %>
      </div>
    </div>

    <!-- Desktop Table View (hidden on mobile) -->
    <div class="mt-6 hidden sm:block ">
      <div class="overflow-hidden rounded-lg border border-gray-200">
          <table class="min-w-full  divide-y divide-gray-200 bg-white">
            <thead class="bg-gradient-to-r from-gray-50 to-gray-100">
              <tr>
                <th scope="col" class="px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"> 
                  <%= tf("product.app_id") %> 
                </th>
                <th scope="col" class="px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"> 
                  <%= tf("product.price") %> 
                </th>
                <th scope="col" class="px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"> 
                  <%= tf("product.product_name") %> 
                </th>
                <th scope="col" class="px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider"> 
                  <%= tf("product.company") %> 
                </th>
                <th scope="col" class="px-6 py-4 text-right text-xs font-bold text-gray-700 uppercase tracking-wider">
                  <%= t("actions") %>
                </th>
              </tr>
            </thead>
            <tbody data-controller="sort-with-update" class="bg-white divide-y divide-gray-100" data-sortable-update-path="<%= sort_user_list_products_path(list) %>" id="list-body-<%= list.id %>">
              <% list.products.all_visible.each do |product| %>
                <%= render "user/products/product", product: product, list: list %>
              <% end %>
              
              <%= render "user/products/new_bttn", list: list %>
            </tbody>
          </table>
      </div>
    </div>
  </div>
</li>
